
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Tech blog">
    <title>Archives: 2021/7 - Tech blog</title>
    <meta name="author" content="injun Seo">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Tech blog">
<meta property="og:url" content="http://example.com/archives/2021/07/index.html">
<meta property="og:site_name" content="Tech blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="injun Seo">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-71bpr5ghyutotvmpmjhoxhb1ugpvdlpvpjd5fh9ubniqnilexlrx5rzzujcc.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Tech blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/07/27/%5Bspring%20MVC%5D%20@Session/"
                            aria-label=": [spring MVC] Session"
                        >
                            [spring MVC] Session
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-07-27T12:55:53+09:00">
	
		    Jul 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/spring/">spring</a>, <a class="category-link" href="/categories/spring/spring-MVC/">spring MVC</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-Cookie에-담기"><a href="#1-Cookie에-담기" class="headerlink" title="1. Cookie에 담기"></a>1. Cookie에 담기</h1><h2 id="1-1-서버에서-쿠키를-생성-조회하기"><a href="#1-1-서버에서-쿠키를-생성-조회하기" class="headerlink" title="1.1. 서버에서 쿠키를 생성, 조회하기"></a>1.1. 서버에서 쿠키를 생성, 조회하기</h2><p>Cookie라는 클래스로 클라이언트에 응답할 쿠키정보 생성한다.</p>
<h3 id="서버에서-쿠키-생성하기"><a href="#서버에서-쿠키-생성하기" class="headerlink" title="서버에서 쿠키 생성하기"></a>서버에서 쿠키 생성하기</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">loginV1</span><span class="params">(<span class="meta">@ModelAttribute</span> LoginForm form, BindingResult bindingResult, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;id= &#123;&#125;, pw= &#123;&#125;&quot;</span>, form.getLoginId(), form.getPassword());</span><br><span class="line">        <span class="keyword">if</span> (bindingResult.hasErrors()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login/loginForm&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Member loginMember = loginService.login(form.getLoginId(), form.getPassword());</span><br><span class="line">        <span class="keyword">if</span> (loginMember == <span class="keyword">null</span>) &#123;</span><br><span class="line">            bindingResult.reject(<span class="string">&quot;loginFail&quot;</span>, <span class="string">&quot;Id or password is not correct&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login/loginForm&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// session cookie</span></span><br><span class="line">        Cookie idCookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;memberId&quot;</span>, String.valueOf(loginMember.getLoginId()));</span><br><span class="line">        response.addCookie(idCookie);</span><br><span class="line">        log.info(<span class="string">&quot;idCookie= &#123;&#125;&quot;</span>, idCookie);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>new Cookie(&quot;memberId&quot;, String.valueOf(loginMember.getLoginId()))</code> : Cookie에 key/value 담고 생성한다.</li>
<li><code>response.addCookie(idCookie)</code> : 방금 만든 Cookie인 idCookie를 response(HttpServletResponse로 만든 객체)에 담아준다.</li>
</ul>
<h3 id="서버에서-쿠키-조회하기"><a href="#서버에서-쿠키-조회하기" class="headerlink" title="서버에서 쿠키 조회하기"></a>서버에서 쿠키 조회하기</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GetMapping(<span class="string">&quot;/&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">homeLogin</span><span class="params">(<span class="meta">@CookieValue(name = &quot;memberId&quot;, required = false)</span> Long memberId, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (memberId == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Member loginMember = memberRepository.findById(memberId);</span><br><span class="line">    <span class="keyword">if</span> (loginMember == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    model.addAttribute(<span class="string">&quot;member&quot;</span>, loginMember);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;loginHome&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>homeLogin(@CookieValue(name = &quot;memberId&quot;, required = false) Long memberId, Model model)</code> : 전송된 쿠키 정보 중에서 key가 “memberId”인 쿠키값을 찾고, <code>memberId</code>에 할당한다. <code>required=false</code>는 쿠키정보가 없는 비회원도 접근 가능하다. </li>
</ul>
<hr>
<h2 id="1-2-서버에서-쿠키-없애기"><a href="#1-2-서버에서-쿠키-없애기" class="headerlink" title="1.2. 서버에서 쿠키 없애기"></a>1.2. 서버에서 쿠키 없애기</h2><ul>
<li>쿠키의 종료 날짜를 0으로 줘서 만료시킬 수 있다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/logout&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">logoutV1</span><span class="params">(HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    expiredCookie(response, <span class="string">&quot;memberId&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/&quot;</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">expiredCookie</span><span class="params">(HttpServletResponse response, String cookieName)</span> </span>&#123;</span><br><span class="line">    Cookie cookie = <span class="keyword">new</span> Cookie(cookieName, <span class="keyword">null</span>);</span><br><span class="line">    cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="2-Session으로-로그인"><a href="#2-Session으로-로그인" class="headerlink" title="2. Session으로 로그인"></a>2. Session으로 로그인</h1><ul>
<li>세션 관리 기능의 역할<ol>
<li>session 생성:</li>
</ol>
<ul>
<li>session의 key와 value를 담는다.</li>
<li>key는 유일한 값이며, 추정하기 힘든 랜덤값이어야 한다.</li>
<li>session key를 응답 쿠키에 저장해서 client에게 전달하게 한다.</li>
</ul>
<ol start="2">
<li>session 조회: </li>
</ol>
<ul>
<li>client가 요청한 sessionId 쿠키 값으로 세션 저장소에 저장된 값을 찾는다.</li>
</ul>
<ol start="3">
<li>session 만료: </li>
</ol>
<ul>
<li>client가 요청한 seesionId 쿠키 값에 해당하는 엔트리를 세션 저장소에서 제거한다. </li>
</ul>
</li>
</ul>
<h2 id="2-1-Session-Manager-직접-만들기"><a href="#2-1-Session-Manager-직접-만들기" class="headerlink" title="2.1. Session Manager 직접 만들기"></a>2.1. Session Manager 직접 만들기</h2><h3 id="2-1-1-SessionManger-클래스-만들고-component로-등록한다"><a href="#2-1-1-SessionManger-클래스-만들고-component로-등록한다" class="headerlink" title="2.1.1. SessionManger 클래스 만들고 component로 등록한다."></a>2.1.1. SessionManger 클래스 만들고 component로 등록한다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SESSION_COOKIE_NAME = <span class="string">&quot;mySessionId&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; sessionStore = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createSession</span><span class="params">(Object value, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//create Session</span></span><br><span class="line">        String sessionId = UUID.randomUUID().toString();</span><br><span class="line">        sessionStore.put(sessionId, value);</span><br><span class="line">        <span class="comment">// create Cookie and addCookie</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(SESSION_COOKIE_NAME, sessionId);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getSession</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        Cookie cookie = findCookie(request, SESSION_COOKIE_NAME);</span><br><span class="line">        <span class="keyword">if</span>(cookie == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sessionStore.get(cookie.getValue());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">expire</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        Cookie cookie = findCookie(request, SESSION_COOKIE_NAME);</span><br><span class="line">        <span class="keyword">if</span>(cookie != <span class="keyword">null</span>)&#123;</span><br><span class="line">            sessionStore.remove(cookie.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Cookie <span class="title">findCookie</span><span class="params">(HttpServletRequest request, String cookieName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(request.getCookies() == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(request.getCookies())</span><br><span class="line">                .filter(c -&gt; c.getName().equals(cookieName))</span><br><span class="line">                .findAny()</span><br><span class="line">                .orElse(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-1-2-session-생성-login시-controller에서-session을-생성한다"><a href="#2-1-2-session-생성-login시-controller에서-session을-생성한다" class="headerlink" title="2.1.2. session 생성: login시 controller에서 session을 생성한다."></a>2.1.2. session 생성: login시 controller에서 session을 생성한다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">loginV2</span><span class="params">(<span class="meta">@ModelAttribute</span> LoginForm form, BindingResult bindingResult, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// session Manager로 session 생성, member 정보 보관\</span></span><br><span class="line">        sessionManager.createSession(loginMember, response);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-3-session-조회"><a href="#2-1-3-session-조회" class="headerlink" title="2.1.3. session 조회"></a>2.1.3. session 조회</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">homeLoginV2</span><span class="params">(HttpServletRequest request, Model model)</span> </span>&#123;</span><br><span class="line">    Member member = (Member) sessionManager.getSession(request);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (member == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    model.addAttribute(<span class="string">&quot;member&quot;</span>, member);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;loginHome&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-4-session-만료시키기"><a href="#2-1-4-session-만료시키기" class="headerlink" title="2.1.4. session 만료시키기:"></a>2.1.4. session 만료시키기:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/logout&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">logoutV2</span><span class="params">(HttpServletResponse response, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">       sessionManager.expire(request);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-2-Servlet-HttpSession을-이용한-로그인-처리"><a href="#2-2-Servlet-HttpSession을-이용한-로그인-처리" class="headerlink" title="2.2. Servlet: HttpSession을 이용한 로그인 처리"></a>2.2. Servlet: HttpSession을 이용한 로그인 처리</h2><ul>
<li>SessionManager의 역할을 하는 객체를 서블릿에서는 HttpServlet 클래스를 통해 제공한다.</li>
</ul>
<h3 id="2-2-1-session-조회용-상수"><a href="#2-2-1-session-조회용-상수" class="headerlink" title="2.2.1. session 조회용 상수"></a>2.2.1. session 조회용 상수</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SessionConst</span> </span>&#123;</span><br><span class="line">		String LOGIN_MEMBER = <span class="string">&quot;loginMember&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-session-생성"><a href="#2-2-2-session-생성" class="headerlink" title="2.2.2. session 생성"></a>2.2.2. session 생성</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;login&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">loginV3</span><span class="params">(<span class="meta">@ModelAttribute</span> LoginForm form, BindingResult bindingResult,</span></span></span><br><span class="line"><span class="params"><span class="function">                        HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// session 생성, member 정보 보관</span></span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    session.setAttribute(SessionConst.LOGIN_MEMBER, loginMember);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>request.getSession()</code>: session을 생성 또는 조회한다. <code>getSession(create: true)</code>가 default다.<ol>
<li>true: session이 있으면 기존 session을 반환한다. session이 없으면, 새로운 session을 생성해서 반환한다.</li>
<li>false: session이 있으면 반환하고, 없으면 새로운 session을 생성하지 않고, null을 반환한다.</li>
</ol>
</li>
</ul>
<h3 id="2-2-3-Session-조회하기"><a href="#2-2-3-Session-조회하기" class="headerlink" title="2.2.3. Session 조회하기"></a>2.2.3. Session 조회하기</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">homeLoginV3</span><span class="params">(HttpServletRequest request, Model model)</span> </span>&#123;</span><br><span class="line">    HttpSession session = request.getSession(<span class="keyword">false</span>);</span><br><span class="line">    <span class="keyword">if</span> (session == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Object attribute = session.getAttribute(SessionConst.LOGIN_MEMBER);</span><br><span class="line">    Member member = (Member) attribute;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;member&quot;</span>, member);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;loginHome&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-3-session-만료"><a href="#2-2-3-session-만료" class="headerlink" title="2.2.3. session 만료"></a>2.2.3. session 만료</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/logout&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">logoutV3</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    HttpSession session = request.getSession(create: <span class="keyword">false</span>);</span><br><span class="line">    <span class="keyword">if</span> (session != <span class="keyword">null</span>) &#123;</span><br><span class="line">        session.invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>session.invalidate()</code>: session을 제거한다.</li>
</ul>
<hr>
<h2 id="2-3-SessionAttribute"><a href="#2-3-SessionAttribute" class="headerlink" title="2.3. @SessionAttribute"></a>2.3. @SessionAttribute</h2><h3 id="2-3-1-SessionAttribute로-session-조회"><a href="#2-3-1-SessionAttribute로-session-조회" class="headerlink" title="2.3.1.@SessionAttribute로 session 조회"></a>2.3.1.@SessionAttribute로 session 조회</h3> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">homeLoginV3Spring</span><span class="params">(<span class="meta">@SessionAttribute(name = SessionConst.LOGIN_MEMBER, required = false)</span>Member loginMember,</span></span></span><br><span class="line"><span class="params"><span class="function">                                HttpServletRequest request, Model model)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (loginMember == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;member&quot;</span>, loginMember);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;loginHome&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>@SessionAttribute(name = SessionConst.LOGIN_MEMBER, required = false)</code>: client에게 전달받은 session 중에서 key가 일치하는 것을 찾는다. <code>required=false</code>이므로, 일치하는 것이 없으면 null을 반환한다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/07/27/%5Bspring%20MVC%5D%20@Session/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/07/21/%5Bspring%20MVC%5D%20Validation/"
                            aria-label=": [spring MVC] Validation"
                        >
                            [spring MVC] Validation
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-07-21T13:59:46+09:00">
	
		    Jul 21, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/spring/">spring</a>, <a class="category-link" href="/categories/spring/spring-MVC/">spring MVC</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Validation"><a href="#Validation" class="headerlink" title="Validation"></a>Validation</h1><ul>
<li>user가 회원가입이나 상품 등록을 할 때, 적절하지 않는 데이터를 입력하는 것을 막아야 한다.<ol>
<li>필수 입력 정보에 Null일때</li>
<li>typeMismatch</li>
<li>비즈니스 요구사항에 맞지 않을 때: 최소 금액 </li>
</ol>
</li>
<li>검증의 종류<ol>
<li>BindingResult</li>
<li>validator</li>
<li>@valid</li>
</ol>
</li>
</ul>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><ul>
<li>item 클래스<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String itemName;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer quantity;</span><br></pre></td></tr></table></figure></li>
<li>Controller에서 직접 errors를 만든다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addItemV7</span><span class="params">(Item item, RedirectAttributes redirectAttributes)</span> </span>&#123;</span><br><span class="line">       Map&lt;String, String&gt; errors = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       <span class="comment">//검증 로직</span></span><br><span class="line">       log.info(<span class="string">&quot;itemName= &#123;&#125;&quot;</span>, item.getItemName());</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span>(item.getItemName() == <span class="keyword">null</span>)&#123;</span><br><span class="line">           errors.put(<span class="string">&quot;itemName&quot;</span>, <span class="string">&quot;상품 이름은 필수입니다.&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//검증 실패시 </span></span><br><span class="line">       <span class="keyword">if</span> (!errors.isEmpty()) &#123;</span><br><span class="line">           log.info(<span class="string">&quot;errors = &#123;&#125;&quot;</span>, errors);</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;basic/addForm&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       Item savedItem = itemRepository.save(item);</span><br><span class="line">       redirectAttributes.addAttribute(<span class="string">&quot;itemId&quot;</span>, savedItem.getId());</span><br><span class="line">       redirectAttributes.addAttribute(<span class="string">&quot;status&quot;</span>, <span class="keyword">true</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/basic/items/&#123;itemId&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>검증에 실패하면 errors에 error message를 담아서, 반환한다.<br>그런데 typeMismatch 시, validation.BindException에 따라 위 컨트롤러로 오기도 전에 400 에러 페이지를 응답한다.</p>
</blockquote>
</li>
</ul>
<h1 id="BindingResult"><a href="#BindingResult" class="headerlink" title="BindingResult"></a>BindingResult</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addItemV8</span><span class="params">(Item item, BindingResult bindingResult,</span></span></span><br><span class="line"><span class="params"><span class="function">                        RedirectAttributes redirectAttributes, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.hasText(item.getItemName())) &#123;</span><br><span class="line">        bindingResult.addError(<span class="keyword">new</span> FieldError(<span class="string">&quot;item&quot;</span>, <span class="string">&quot;itemName&quot;</span>, <span class="string">&quot;item Name&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (item.getPrice() == <span class="keyword">null</span> || item.getPrice() &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">        bindingResult.addError(<span class="keyword">new</span> FieldError(<span class="string">&quot;item&quot;</span>, <span class="string">&quot;itemPrice&quot;</span>, <span class="string">&quot;가격은 최소 1000원&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (item.getQuantity() == <span class="keyword">null</span> || item.getQuantity() &gt;= <span class="number">9999</span>) &#123;</span><br><span class="line">        bindingResult.addError(<span class="keyword">new</span> FieldError(<span class="string">&quot;item&quot;</span>, <span class="string">&quot;quantity&quot;</span>, <span class="string">&quot;수량은 최대 9999개입니다.&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (item.getPrice() != <span class="keyword">null</span> &amp;&amp; item.getQuantity() != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> resultPrice = item.getPrice() * item.getQuantity();</span><br><span class="line">        <span class="keyword">if</span> (resultPrice &lt; <span class="number">10000</span>) &#123;</span><br><span class="line">            bindingResult.addError(<span class="keyword">new</span> ObjectError(<span class="string">&quot;item&quot;</span>, <span class="string">&quot;총액(가격*수량)의 합은 10000원 이상이어야 합니다.&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (bindingResult.hasErrors()) &#123;</span><br><span class="line">        log.info(<span class="string">&quot;errors= &#123;&#125;&quot;</span>, bindingResult);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;basic/addForm&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    log.info(<span class="string">&quot;itemName= &#123;&#125;&quot;</span>, item.getItemName());</span><br><span class="line"></span><br><span class="line">    Item savedItem = itemRepository.save(item);</span><br><span class="line">    redirectAttributes.addAttribute(<span class="string">&quot;itemId&quot;</span>, savedItem.getId());</span><br><span class="line">    redirectAttributes.addAttribute(<span class="string">&quot;status&quot;</span>, <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/basic/items/&#123;itemId&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>error는 두 가지인데, fieldError와 ObjectError이다. </p>
</blockquote>
<ul>
<li>오류 메시지를 보여줄 때, 사용자가 입력한 데이터는 사라진다.</li>
<li>입력해야 할 코드가 많다.</li>
</ul>
<h1 id="Valid"><a href="#Valid" class="headerlink" title="@Valid"></a>@Valid</h1><ul>
<li>class<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotEmpty</span></span><br><span class="line">    <span class="keyword">private</span> String account;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotEmpty</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>컨트롤러에서 @Valid<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">validlogin</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> User user, BindingResult bindingResult)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (bindingResult.hasErrors()) &#123;</span><br><span class="line">            List&lt;ObjectError&gt; allErrors = bindingResult.getAllErrors();</span><br><span class="line">            <span class="keyword">for</span> (ObjectError error : allErrors) &#123;</span><br><span class="line">                System.out.println(error.getDefaultMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;[User] id= &#123;&#125;, account= &#123;&#125;, pw= &#123;&#125;&quot;</span>, user.getId(), user.getAccount(), user.getPassword());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(<span class="string">&quot;Ok&quot;</span>, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>검증 실패 시, error message 출력한다.</p>
</blockquote>
</li>
</ul>
<h1 id="Validated"><a href="#Validated" class="headerlink" title="Validated"></a>Validated</h1><ul>
<li><p>원하는 속성만 유효성 검사를 하고자 할때</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidationGroups</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">group1</span> </span>&#123;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">group2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotEmpty(groups = &#123;ValidationGroups.group1.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> String account;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotEmpty(groups = &#123;ValidationGroups.group2.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>@Validated(..) 괄호 안에 설정을 추가한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/user/login2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">validatedLogin</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Validated(ValidationGroups.group1.class)</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                             User user, BindingResult bindingResult)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (bindingResult.hasErrors()) &#123;</span><br><span class="line">        List&lt;ObjectError&gt; allErrors = bindingResult.getAllErrors();</span><br><span class="line">        <span class="keyword">for</span> (ObjectError error : allErrors) &#123;</span><br><span class="line">            System.out.println(error.getDefaultMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    log.info(<span class="string">&quot;[User] id= &#123;&#125;, account= &#123;&#125;, pw= &#123;&#125;&quot;</span>, user.getId(), user.getAccount(), user.getPassword());</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(<span class="string">&quot;Ok&quot;</span>, HttpStatus.OK);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>group1에 해당하는 속성만 검증한다. 위 경우, account가 group1에 속하기 때문에, account만을 검증한다. 다른 속성들에 null이 들어가도, error message가 출력되지 않는다.</p>
</blockquote>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/07/21/%5Bspring%20MVC%5D%20Validation/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/07/20/Git-reset/"
                            aria-label=": Git reset"
                        >
                            Git reset
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-07-20T17:50:02+09:00">
	
		    Jul 20, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>되돌리는 몇 가지 방법들에 대해서 살펴본다.</p>
<ul>
<li>reset</li>
<li>revert</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/07/20/Git-reset/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/07/15/%5Bspring%20MVC%5D%20Message%20Converter/"
                            aria-label=": [spring MVC] Message Converter"
                        >
                            [spring MVC] Message Converter
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-07-15T19:29:24+09:00">
	
		    Jul 15, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/spring/">spring</a>, <a class="category-link" href="/categories/spring/spring-MVC/">spring MVC</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Message-Converter-사용-이유"><a href="#Message-Converter-사용-이유" class="headerlink" title="Message Converter 사용 이유"></a>Message Converter 사용 이유</h1><ul>
<li>@ResponseBody를 사용하면, Http body에 문자내용을 직접 반환하게 된다. 이때, viewResolver가 아니라 HttpMessageConverter가 동작하게 된다.</li>
<li>더 정확하게, spring MVC는 다음의 경우에 messageConverter를 적용한다.<ul>
<li>Http 요청일때: <code>@ResquestBody</code>, <code>HttpEntity</code></li>
<li>http 응답일때: <code>QresponseBody</code>, <code>HttpEntity</code></li>
</ul>
</li>
</ul>
<hr>
<h1 id="HttpMessageConverter-Interface"><a href="#HttpMessageConverter-Interface" class="headerlink" title="HttpMessageConverter Interface"></a>HttpMessageConverter Interface</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.http.converter;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HttpMessageConverter</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">canRead</span><span class="params">(Class&lt;?&gt; clazz, <span class="meta">@Nullable</span> MediaType mediaType)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">canWrite</span><span class="params">(Class&lt;?&gt; clazz, <span class="meta">@Nullable</span> MediaType mediaType)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">List&lt;MediaType&gt; <span class="title">getSupportedMediaTypes</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">default</span> List&lt;MediaType&gt; <span class="title">getSupportedMediaTypes</span><span class="params">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (canRead(clazz, <span class="keyword">null</span>) || canWrite(clazz, <span class="keyword">null</span>) ?</span><br><span class="line">				getSupportedMediaTypes() : Collections.emptyList());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function">T <span class="title">read</span><span class="params">(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException, HttpMessageNotReadableException</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(T t, <span class="meta">@Nullable</span> MediaType contentType, HttpOutputMessage outputMessage)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException, HttpMessageNotWritableException</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>canRead(), canWrite()</code>: converter가 해당 class, 미디어타입을 지원하는지 확인한다.</li>
<li><code>read() , write()</code> : 컨버터를 통해서 메시지를 읽고 쓴다.</li>
</ul>
<hr>
<h1 id="springBoot-기본-message-converter"><a href="#springBoot-기본-message-converter" class="headerlink" title="springBoot 기본 message converter"></a>springBoot 기본 message converter</h1><table>
<thead>
<tr>
<th>우선순위</th>
<th>converter</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>ByteArrayHttpMessageConverter</td>
</tr>
<tr>
<td>1</td>
<td>StringHttpMessageConverter</td>
</tr>
<tr>
<td>2</td>
<td>MappingJackson2HttpMessageConverter</td>
</tr>
</tbody></table>
<ul>
<li><p>대상 클래스 타입과 미디어 타입 둘을 체크해서 사용여부를 결정한다. 만약 만족하지 않으면 다음 메시지 컨버터로 우선순위가 넘어간다.</p>
</li>
<li><p>converter별 지원 클래스타입과 미디어 타입</p>
</li>
</ul>
<h2 id="Http-request-데이터-읽기-흐름"><a href="#Http-request-데이터-읽기-흐름" class="headerlink" title="Http request 데이터 읽기 흐름"></a>Http request 데이터 읽기 흐름</h2><ol>
<li>http 요청이 오고, Controller에서 @RequestBody 또는 HttpEntity 파리미터를 사용한다고 가정하자.</li>
<li>messageConverter가 메시지를 읽을 수 있는지 확인하기 위해 canRead()를 호출한다. 이때, (1) 대상 class의 타입을 지원하는지 확인한다. e.g., byte[], String, Hellodata 등. (2) 요청의 미디어타입(content-type)을 지원하는지 확인한다. e.g., text/plain, application/json, <em>/</em></li>
<li>canRead() 조건을 만족하면 read()를 호출해서 객체를 생성하고 반환한다.</li>
</ol>
<hr>
<h1 id="messageConverter의-작동-시점"><a href="#messageConverter의-작동-시점" class="headerlink" title="messageConverter의 작동 시점"></a>messageConverter의 작동 시점</h1><ul>
<li><p>우리는 spring MVC 요청흐름을 파악한 바 있다.<br><img src="/images/springMVC_structure.PNG" alt="이미지">[^1]</p>
<ol>
<li>client가 Http 요청을 보내면, DispatcherServlet에서 HandlerMapping으로 handler를 조회한다. <code>@RequestMapping</code>의 경우, RequestMappingHandlerMapping가 실행한다. </li>
<li>handler를 찾은 후 HandlerAdapter로 handler를 실행할 수 있는 어댑터를 찾는다. @RequestMapping의  경우, <strong>RequestMappingHandlerAdapter</strong>가 실행되는데, 이 어댑터가 내부에서 해당 controller를 실행한다. </li>
<li>DispatcherServlet으로 modelAndView 반환한다.</li>
</ol>
</li>
</ul>
<ul>
<li><p><strong><code>RequestMappingHandlerAdapter</code>에서 controller의 @RequestBody, HttpEntity, HttpServletRequest, Model 등을 처리해준다.</strong><br><img src="/images/ArgumentResolver%EC%9A%94%EC%B2%AD%ED%9D%90%EB%A6%84.PNG" alt="이미지">[^2]</p>
<ol>
<li>RequestMappingHandlerAdapter는 <strong>ArgumentResolver</strong>를 호출해서 controller가 필요로 하는 parameter의 값(객체)를 생성한다.</li>
<li>Adapter는 controller를 호출하면서 그 값을 넘겨준다.</li>
</ol>
</li>
</ul>
<hr>
<h2 id="ArgumentResolver"><a href="#ArgumentResolver" class="headerlink" title="ArgumentResolver"></a>ArgumentResolver</h2><ul>
<li>ArgumentResolver: <code>HandlerMethodArgumentResolver</code>Interface <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.web.method.support;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HandlerMethodArgumentResolver</span> </span>&#123;</span><br><span class="line">-</span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">supportsParameter</span><span class="params">(MethodParameter parameter)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	<span class="function">Object <span class="title">resolveArgument</span><span class="params">(MethodParameter parameter, <span class="meta">@Nullable</span> ModelAndViewContainer mavContainer,</span></span></span><br><span class="line"><span class="params"><span class="function">			NativeWebRequest webRequest, <span class="meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ArgumentResolver 의 supportsParameter() 를 호출해서 해당 파라미터를 지원하는지 체크하고,<br>지원하면 resolveArgument() 를 호출해서 실제 객체를 생성한다. 그리고 이렇게 생성된 객체가 컨트롤러<br>호출시 넘어가는 것이다.</li>
</ul>
<h2 id="ReturnValueHandler"><a href="#ReturnValueHandler" class="headerlink" title="ReturnValueHandler"></a>ReturnValueHandler</h2><ul>
<li>HandlerMethodReturnValuehandler는 응답 값을 변환하고 처리한다.</li>
<li>ModelAndView, @ResponseBody, HttpEntity, String 등<br><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-annreturn-types">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-annreturn-types</a></li>
</ul>
<hr>
<h2 id="message-Converter가-호출되는-곳"><a href="#message-Converter가-호출되는-곳" class="headerlink" title="message Converter가 호출되는 곳"></a>message Converter가 호출되는 곳</h2><p><img src="/images/HTTPMessageConverter.PNG" alt="이미지"></p>
<ul>
<li>요청할 때: @ResponseBody는 HandlerMethodArgumentResolver를 구현한 RequestResponseBodyMethodProcessor에 의해 처리된다. (HttpEntity는 HttpEntityMethodProcessor)</li>
</ul>
<p><img src="/images/ArgumentResolver_Diagram.PNG" alt="이미지"></p>
<ol>
<li>supportsParameter에서 ResponseBody를 체크한 후,</li>
<li>resolveArgument()에서 readWithMessageConverters를 사용한다.</li>
<li>Object 만들어서 반환해준다.  </li>
</ol>
<p>이 ArgumentResolver들이 messageConverter를 사용해서 필요한 객체를 생성한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.web.servlet.mvc.method.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestResponseBodyMethodProcessor</span> <span class="keyword">extends</span> <span class="title">AbstractMessageConverterMethodProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RequestResponseBodyMethodProcessor</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(converters);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RequestResponseBodyMethodProcessor</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters,</span></span></span><br><span class="line"><span class="params"><span class="function">			<span class="meta">@Nullable</span> ContentNegotiationManager manager)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">super</span>(converters, manager);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RequestResponseBodyMethodProcessor</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters,</span></span></span><br><span class="line"><span class="params"><span class="function">			<span class="meta">@Nullable</span> List&lt;Object&gt; requestResponseBodyAdvice)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">super</span>(converters, <span class="keyword">null</span>, requestResponseBodyAdvice);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Complete constructor for resolving &#123;<span class="doctag">@code</span> <span class="doctag">@RequestBody</span>&#125; and handling</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@code</span> <span class="doctag">@ResponseBody</span>&#125;.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RequestResponseBodyMethodProcessor</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters,</span></span></span><br><span class="line"><span class="params"><span class="function">			<span class="meta">@Nullable</span> ContentNegotiationManager manager, <span class="meta">@Nullable</span> List&lt;Object&gt; requestResponseBodyAdvice)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">super</span>(converters, manager, requestResponseBodyAdvice);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supportsParameter</span><span class="params">(MethodParameter parameter)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> parameter.hasParameterAnnotation(RequestBody.class);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supportsReturnType</span><span class="params">(MethodParameter returnType)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (AnnotatedElementUtils.hasAnnotation(returnType.getContainingClass(), ResponseBody.class) ||</span><br><span class="line">				returnType.hasMethodAnnotation(ResponseBody.class));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">resolveArgument</span><span class="params">(MethodParameter parameter, <span class="meta">@Nullable</span> ModelAndViewContainer mavContainer,</span></span></span><br><span class="line"><span class="params"><span class="function">			NativeWebRequest webRequest, <span class="meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">		parameter = parameter.nestedIfOptional();</span><br><span class="line">		Object arg = readWithMessageConverters(webRequest, parameter, parameter.getNestedGenericParameterType());</span><br><span class="line">		String name = Conventions.getVariableNameForParameter(parameter);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (binderFactory != <span class="keyword">null</span>) &#123;</span><br><span class="line">			WebDataBinder binder = binderFactory.createBinder(webRequest, arg, name);</span><br><span class="line">			<span class="keyword">if</span> (arg != <span class="keyword">null</span>) &#123;</span><br><span class="line">				validateIfApplicable(binder, parameter);</span><br><span class="line">				<span class="keyword">if</span> (binder.getBindingResult().hasErrors() &amp;&amp; isBindExceptionRequired(binder, parameter)) &#123;</span><br><span class="line">					<span class="keyword">throw</span> <span class="keyword">new</span> MethodArgumentNotValidException(parameter, binder.getBindingResult());</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (mavContainer != <span class="keyword">null</span>) &#123;</span><br><span class="line">				mavContainer.addAttribute(BindingResult.MODEL_KEY_PREFIX + name, binder.getBindingResult());</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> adaptArgumentIfNecessary(arg, parameter);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> &lt;T&gt; <span class="function">Object <span class="title">readWithMessageConverters</span><span class="params">(NativeWebRequest webRequest, MethodParameter parameter,</span></span></span><br><span class="line"><span class="params"><span class="function">			Type paramType)</span> <span class="keyword">throws</span> IOException, HttpMediaTypeNotSupportedException, HttpMessageNotReadableException </span>&#123;</span><br><span class="line"></span><br><span class="line">		HttpServletRequest servletRequest = webRequest.getNativeRequest(HttpServletRequest.class);</span><br><span class="line">		Assert.state(servletRequest != <span class="keyword">null</span>, <span class="string">&quot;No HttpServletRequest&quot;</span>);</span><br><span class="line">		ServletServerHttpRequest inputMessage = <span class="keyword">new</span> ServletServerHttpRequest(servletRequest);</span><br><span class="line"></span><br><span class="line">		Object arg = readWithMessageConverters(inputMessage, parameter, paramType);</span><br><span class="line">		<span class="keyword">if</span> (arg == <span class="keyword">null</span> &amp;&amp; checkRequired(parameter)) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> HttpMessageNotReadableException(<span class="string">&quot;Required request body is missing: &quot;</span> +</span><br><span class="line">					parameter.getExecutable().toGenericString(), inputMessage);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> arg;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>응답 시: @ResponseBody, HttpEntity를 처리하는 ReturnValueHandler가 messageConverter를 호출해서 응답 결과를 만든다.</li>
</ul>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li>김영한(2021-03-21), Spring MVC 1편, Ch6 S13 ~ S14</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/07/15/%5Bspring%20MVC%5D%20Message%20Converter/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/07/15/%5Bspring%20MVC%5D%20@Controller/"
                            aria-label=": [spring MVC] @Controller"
                        >
                            [spring MVC] @Controller
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-07-15T19:29:15+09:00">
	
		    Jul 15, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/spring/">spring</a>, <a class="category-link" href="/categories/spring/spring-MVC/">spring MVC</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Controller"><a href="#Controller" class="headerlink" title="@Controller"></a>@Controller</h1><ul>
<li>HTTP 요청, 응답함에 있어 @controller가 지원하는 annotation들을 살펴보자.</li>
<li>주요 파라미터 지원 목록<ol>
<li>Http header</li>
<li>Http body</li>
<li>Http API</li>
</ol>
</li>
<li>@Controller에서 사용 가능한 파라미터들: <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-arguments">docs.spring</a></li>
<li>응답 값: <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-annreturn-types">docs</a></li>
</ul>
<hr>
<h1 id="HTTP-요청값-처리"><a href="#HTTP-요청값-처리" class="headerlink" title="HTTP 요청값 처리"></a>HTTP 요청값 처리</h1><ul>
<li>Http 요청 데이터를 조회하는 방법: Http 요청 메시리를 통해 클라이언트가 서버로 데이터를 전달하는 방법<ol>
<li>GET: query parameter</li>
<li>POST: HTML form</li>
<li>HTTP Message body에 데이터 담아서 요청: 주로 JSON</li>
</ol>
</li>
</ul>
<h2 id="ReuqestParam"><a href="#ReuqestParam" class="headerlink" title="@ReuqestParam"></a>@ReuqestParam</h2><ul>
<li>메서드 옆에 <code>@Requestparam</code> 추가해서 사용</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestParamController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/request-param-v2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">requestParamV2</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@RequestParam(&quot;username&quot;)</span> String name,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@RequestParam(&quot;age&quot;)</span> <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;userName= &#123;&#125;, age= &#123;&#125;&quot;</span>, name, age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Ok&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>변수를 HTTP parameter 이름과 같게 설정하면, <code>@RequestParam(name=&quot;x&quot;)</code> 생략 가능하다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/request-param-v3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParamV3</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="meta">@RequestParam</span> String username,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="meta">@RequestParam</span> <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, username, age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>@RequestParam</code>도 생략 가능하다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/request-param-v4&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParamV4</span><span class="params">(String username, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, username, age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>parameter 필수 여부 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/request-param-required&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">requestParamRequired</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@RequestParam(required = true)</span> String username,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@RequestParam(required = false)</span> <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        int a = null;</span></span><br><span class="line"><span class="comment">//        Integer b = null;</span></span><br><span class="line">        log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, username, age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li>기본값 적용<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/request-param-default&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParamDefault</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="meta">@RequestParam(required = true, defaultValue = &quot;guest&quot;)</span> String username,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="meta">@RequestParam(required = false, defaultValue = &quot;-1&quot;)</span> <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, username, age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>파라미터를 Map으로 조회 가능하다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/request-param-map&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParamMap</span><span class="params">(<span class="meta">@RequestParam</span> Map&lt;String, Object&gt; paramMap)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;username=&#123;&#125;, age=&#123;&#125;&quot;</span>, paramMap.get(<span class="string">&quot;username&quot;</span>), paramMap.get(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ModelAttrubute"><a href="#ModelAttrubute" class="headerlink" title="@ModelAttrubute"></a>@ModelAttrubute</h2></li>
<li>요청 파라미터를 받아서 필요한 객체를 만들고 그 객체에 값을 넣어주기 위해 <code>@modelAttribute</code> 사용한다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/model-attribute-v1&quot;)</span></span><br><span class="line"><span class="comment">/*    public String modelAttributeV1(@RequestParam String username, @RequestParam int age) &#123;</span></span><br><span class="line"><span class="comment">        HelloData helloData = new HelloData();</span></span><br><span class="line"><span class="comment">        helloData.setUsername(username);</span></span><br><span class="line"><span class="comment">        helloData.setAge(age);</span></span><br><span class="line"><span class="comment">        log.info(&quot;username=&#123;&#125;, age=&#123;&#125;&quot;, helloData.getUsername(), helloData.getAge());</span></span><br><span class="line"><span class="comment">        log.info(&quot;helloDate=&#123;&#125;&quot;, helloData);</span></span><br><span class="line"><span class="comment">        return &quot;ok&quot;;*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">modelAttributeV1</span><span class="params">(<span class="meta">@ModelAttribute</span> HelloData helloData)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, helloData.getUsername(), helloData.getAge());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/model-attribute-v2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">modelAttributeV2</span><span class="params">(HelloData helloData)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, helloData.getUsername(), helloData.getAge());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h2><ul>
<li>HTTP message body에 데이터를 직접 담아서 요청할때 사용한다.데이터를 담을 때, 크게 두 가지 방식이 있다.<ol>
<li>단순 메시지</li>
<li>JSON</li>
</ol>
</li>
</ul>
<h2 id="RequestBody-Case1-단순-메시지"><a href="#RequestBody-Case1-단순-메시지" class="headerlink" title="@RequestBody:  (Case1) 단순 메시지"></a>@RequestBody:  (Case1) 단순 메시지</h2><h3 id="서블릿"><a href="#서블릿" class="headerlink" title="서블릿"></a>서블릿</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestBodyStringController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/request-body-string-v1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestBodyString</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ServletInputStream inputStream = req.getInputStream();</span><br><span class="line">        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);</span><br><span class="line">        log.info(<span class="string">&quot;messageBody= &#123;&#125;&quot;</span>, messageBody);</span><br><span class="line">        res.getWriter().write(<span class="string">&quot;Ok&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="spring-MVC-제공-parameter-InputStream-reader-OuterStream-writer"><a href="#spring-MVC-제공-parameter-InputStream-reader-OuterStream-writer" class="headerlink" title="spring MVC 제공 parameter: :InputStream (reader), OuterStream (writer)"></a>spring MVC 제공 parameter: :<code>InputStream</code> (reader), <code>OuterStream</code> (writer)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/request-body-string-v2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestBodyStringV2</span><span class="params">(InputStream inputStream, Writer writer)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);</span><br><span class="line">    log.info(<span class="string">&quot;messageBody= &#123;&#125;&quot;</span>, messageBody);</span><br><span class="line">    writer.write(<span class="string">&quot;Ok&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="HttpEntity-HTTP-header-body-정보를-편라하게-조회"><a href="#HttpEntity-HTTP-header-body-정보를-편라하게-조회" class="headerlink" title="HttpEntity: HTTP header, body 정보를 편라하게 조회"></a>HttpEntity: HTTP header, body 정보를 편라하게 조회</h3><ul>
<li><p>응답에서도 HttpEntity 사용 가능</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/request-body-string-v3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> HttpEntity&lt;String&gt; <span class="title">requestBodyStringV3</span><span class="params">(HttpEntity&lt;String&gt; httpEntity)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String messageBody = httpEntity.getBody();</span><br><span class="line">    log.info(<span class="string">&quot;messageBody= &#123;&#125;&quot;</span>, messageBody);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> HttpEntity&lt;&gt;(<span class="string">&quot;Ok&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Requestbody-메시지-바디-정보를-직접-조회"><a href="#Requestbody-메시지-바디-정보를-직접-조회" class="headerlink" title="@Requestbody: 메시지 바디 정보를 직접 조회"></a>@Requestbody: 메시지 바디 정보를 직접 조회</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/request-body-string-v4&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">requestBodyStringV4</span><span class="params">(<span class="meta">@RequestBody</span> String messageBody)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;messageBody=&#123;&#125;&quot;</span>, messageBody);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestBody-Case2-JSON"><a href="#RequestBody-Case2-JSON" class="headerlink" title="@RequestBody:  (Case2) JSON"></a>@RequestBody:  (Case2) JSON</h2><h3 id="Servlet-사용"><a href="#Servlet-사용" class="headerlink" title="Servlet 사용"></a>Servlet 사용</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestBodyJsonController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/request-body-json-v1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestBodyJsonV1</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ServletInputStream inputStream = req.getInputStream();</span><br><span class="line">        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;messageBody= &#123;&#125;&quot;</span>, messageBody);</span><br><span class="line">        HelloData helloData = objectMapper.readValue(messageBody, HelloData.class);</span><br><span class="line">        log.info(<span class="string">&quot;username=&#123;&#125;, age=&#123;&#125;&quot;</span>, helloData.getUsername(), helloData.getAge());</span><br><span class="line">        res.getWriter().write(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="RequestBody-1"><a href="#RequestBody-1" class="headerlink" title="@RequestBody"></a>@RequestBody</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/request-body-json-v2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestBodyJsonV2</span><span class="params">(<span class="meta">@RequestBody</span> String messageBody)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;messageBody= &#123;&#125;&quot;</span>, messageBody);</span><br><span class="line">    HelloData helloData = objectMapper.readValue(messageBody, HelloData.class);</span><br><span class="line">    log.info(<span class="string">&quot;username=&#123;&#125;, age=&#123;&#125;&quot;</span>, helloData.getUsername(), helloData.getAge());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="RequestBody-에-직접-만든-객체를-지정할-수-있다"><a href="#RequestBody-에-직접-만든-객체를-지정할-수-있다" class="headerlink" title="@RequestBody 에 직접 만든 객체를 지정할 수 있다"></a>@RequestBody 에 직접 만든 객체를 지정할 수 있다</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/request-body-json-v3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestBodyJsonV3</span><span class="params">(<span class="meta">@RequestBody</span> HelloData helloData)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;username=&#123;&#125;, age=&#123;&#125;&quot;</span>, helloData.getUsername(), helloData.getAge());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Ok&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/request-body-json-v5&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> HelloData <span class="title">requestBodyJsonV5</span><span class="params">(<span class="meta">@RequestBody</span> HelloData data)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, data.getUsername(), data.getAge());</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="HttpEntity를-사용해서-객체로-데이터-저장-가능하다"><a href="#HttpEntity를-사용해서-객체로-데이터-저장-가능하다" class="headerlink" title="HttpEntity를 사용해서 객체로 데이터 저장 가능하다."></a>HttpEntity를 사용해서 객체로 데이터 저장 가능하다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/request-body-json-v4&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">requestBodyJsonV4</span><span class="params">(HttpEntity&lt;HelloData&gt; httpEntity)</span> </span>&#123;</span><br><span class="line">        HelloData data = httpEntity.getBody();</span><br><span class="line">        log.info(<span class="string">&quot;username= &#123;&#125;, age= &#123;&#125;&quot;</span>, data.getUsername(), data.getAge());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>HttpEntity , @RequestBody 를 사용하면 HTTP 메시지 컨버터가 HTTP 메시지 바디의 내용을 우리가 원하는 문자나 객체 등으로 변환해준다.</p>
</li>
</ul>
<hr>
<h1 id="HTTP-응답-처리"><a href="#HTTP-응답-처리" class="headerlink" title="HTTP 응답 처리"></a>HTTP 응답 처리</h1><ul>
<li>우리가 이전에 본 spring MVC 구조에서, Controller는 ModelAndView에 경로를 담아서 반환했다. 하지만, annotation 기반의 @controller에서는 다른 것들 –String, void 등도 가능하다. 이것이 어떻게 가능한지에 대해서는 다음 장에서 살펴보겠다.</li>
<li>여기서 우리는 스프링에서 응답 데이터를 만들고 반환하는 기능들에 대해서 알아보고자 한다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMemberListControllerV1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> MemberRepository memberRepository = MemberRepository.getInstance();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/springmvc/v1/members&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">process</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Member&gt; members = memberRepository.findAll();</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;members&quot;</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;members&quot;</span>, members);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>스프링 서버에서 응답 데이터를 만드는 방법<ol>
<li>static resource: 해당 파일(.html)을 변경 없이 그대로 서비스하는 것</li>
<li>view template: 뷰 템플릿을 거쳐서 HTML이 생성되고, 뷰가 응답을 만들어서 전달한다</li>
<li>HTTP message</li>
</ol>
</li>
</ul>
<h2 id="view로-전달"><a href="#view로-전달" class="headerlink" title="view로 전달"></a>view로 전달</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/response-view-v1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">responseViewV1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;response/hello.html&quot;</span>)</span><br><span class="line">                .addObject(<span class="string">&quot;data&quot;</span>, <span class="string">&quot;hello, view-V1&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/response-view-v2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">responseViewV2</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;data&quot;</span>, <span class="string">&quot;hello, view-v2&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;response/hello.html&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>response/hello 로 뷰 리졸버가 실행되어서 뷰를 찾고, 렌더링 한다<h2 id="Http-API"><a href="#Http-API" class="headerlink" title="Http API"></a>Http API</h2></li>
<li>view template을 거치지 않고, 직접 Http 메시지 바디에 JSON 같은 형식으로 데이터를 담아서 보내는 방법</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">//@RestController</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseBodyController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/response-body-string-v1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">responseBodyV1</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;ok&quot;</span>);   </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * HttpEntity, ResponseEntity(Http Status 추가)</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/response-body-string-v2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">responseBodyV2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(<span class="string">&quot;ok&quot;</span>, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/response-body-string-v3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">responseBodyV3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@ResponseBody 를 사용하면 view를 사용하지 않고, HTTP 메시지 컨버터를 통해서 HTTP 메시지를 직접 입력할 수 있다</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@GetMapping(&quot;/response-body-json-v1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;HelloData&gt; <span class="title">responseBodyJsonV1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HelloData helloData = <span class="keyword">new</span> HelloData();</span><br><span class="line">        helloData.setUsername(<span class="string">&quot;userA&quot;</span>);</span><br><span class="line">        helloData.setAge(<span class="number">20</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(helloData, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseStatus(HttpStatus.OK)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/response-body-json-v2&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> HelloData <span class="title">responseBodyJsonV2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HelloData helloData = <span class="keyword">new</span> HelloData();</span><br><span class="line">        helloData.setUsername(<span class="string">&quot;userA&quot;</span>);</span><br><span class="line">        helloData.setAge(<span class="number">20</span>);</span><br><span class="line">        <span class="keyword">return</span> helloData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li>김영한(2021-03-21), Spring MVC 1편: Ch6, 인프런</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/07/15/%5Bspring%20MVC%5D%20@Controller/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/07/14/%5Bspring%20MVC%5D%20@RequestMapping/"
                            aria-label=": [spring MVC] @RequestMapping"
                        >
                            [spring MVC] @RequestMapping
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-07-14T15:09:37+09:00">
	
		    Jul 14, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/spring/">spring</a>, <a class="category-link" href="/categories/spring/spring-MVC/">spring MVC</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="기본-요청"><a href="#기본-요청" class="headerlink" title="기본 요청"></a>기본 요청</h1><ul>
<li>@RequestMapping<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MappingController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/hello-basic&quot;, &quot;/hello&quot;&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloBasic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;hello-Basic&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li>“/hello-basic” 또는 “/hello” url 호출 시, 해당 메서드가 실행되도록 매핑해준다.</li>
<li>Http 메서드를 모두 허용해준다. GET, POST, PUT 등</li>
</ul>
<h1 id="HTTP-메서드-매핑"><a href="#HTTP-메서드-매핑" class="headerlink" title="HTTP 메서드 매핑"></a>HTTP 메서드 매핑</h1><ul>
<li>특정 HTTP 메서드 요청만 허용해준다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/mapping-get&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">mappingGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">&quot;mappingGet&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>@PostMapping, @PutMapping 등</li>
</ul>
<h1 id="경로-변수-사용"><a href="#경로-변수-사용" class="headerlink" title="경로 변수 사용"></a>경로 변수 사용</h1><ul>
<li><p>@PathVariable</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/mapping/&#123;userId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">mappingPath</span><span class="params">(<span class="meta">@PathVariable(&quot;userId&quot;)</span> String data)</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">&quot;mappingPath userId=&#123;&#125;&quot;</span>, data);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>특정 parameter 조건 매핑</p>
<ul>
<li><p>params=”mode=debug”,</p>
</li>
<li><p>pramas = “!mode”</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value = &quot;/mapping-param&quot;, params = &quot;mode=debug&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">mappingParam</span><span class="params">()</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">&quot;mappingParam&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* params에 &quot;mode=debug&quot; 포함되어야 요청을 받아들인다.</span></span><br></pre></td></tr></table></figure>
<ul>
<li>그 밖의 조건들<ol>
<li>특정 헤더 조건 매핑: header=”..”</li>
<li>미디어타입 조건 매핑: consumes=”..”, produces=”..”</li>
</ol>
</li>
</ul>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li>김영한(2021-03-21), Spring MVC 1편, Ch6 S13 ~ S14</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/07/14/%5Bspring%20MVC%5D%20@RequestMapping/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/07/14/hello-world/"
                            aria-label=": Hello World"
                        >
                            Hello World
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-07-14T14:10:06+09:00">
	
		    Jul 14, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/07/14/hello-world/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 injun Seo. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">injun Seo</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-8zqyl9th3d0kg8nhvyqiuf7xmzfplfels2hub5qcaw6qav0ksv9sm3pcdl6k.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
